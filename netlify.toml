[build]
  command = "pnpm build"
  publish = "dist"
  functions = "/netlify/functions"

[build.environment]
  NPM_FLAGS = "--shamefully-hoist"

[functions]
  node_bundler = "esbuild"
  external_node_modules = ["resend", "@supabase/supabase-js"]

[functions.esbuild]
  format = "esm"
  platform = "node"
  target = "node18"

[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200